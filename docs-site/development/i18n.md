# 国际化 (i18n)

Shimeji-Live 支持多语言，使其能够服务于全球用户。本指南将介绍如何为应用程序添加新的语言翻译。

## 语言文件

应用程序的界面文本存储在 `.properties` 文件中，位于 `conf/` 目录下。

- **`language.properties`**: 默认语言文件。如果找不到特定语言的翻译，系统将从此文件中读取。通常使用英语作为默认值。
- **`language_en.properties`**: 英语语言文件。
- **`language_zh.properties`**: 中文语言文件。
- **`language_xx.properties`**: 其他语言的文件，其中 `xx` 是 [ISO 639-1](https://www.loc.gov/standards/iso639-2/php/code_list.php) 语言代码。

## 文件格式

`.properties` 文件是简单的键值对文本文件。

```properties
# 这是注释
Key=Value
AnotherKey=这是一个值
```

- **`Key`**: 文本的唯一标识符。**在所有语言文件中，键必须保持一致。**
- **`Value`**: 对应语言的翻译文本。

### 示例: `language_en.properties`
```properties
Exit=Exit
Settings=Settings
```

### 示例: `language_es.properties` (西班牙语)
```properties
Exit=Salir
Settings=Configuración
```

## 如何添加新语言

假设您想添加西班牙语 (`es`)。

### 第一步：创建语言文件

1.  在 `conf/` 目录下，复制 `language_en.properties` 文件。
2.  将复制的文件重命名为 `language_es.properties`。

### 第二步：翻译文本

1.  打开 `language_es.properties` 文件。
2.  逐行将等号 (`=`) 右侧的英文文本翻译成西班牙语。**请勿修改等号左侧的键。**

   ```properties
   # From:
   Exit=Exit
   Settings=Settings

   # To:
   Exit=Salir
   Settings=Configuración
   ```

### 第三步：更新语言选择逻辑 (可选)

当前版本的 Shimeji-Live 可能会根据操作系统的语言设置自动选择语言文件。如果需要手动添加语言切换的 UI，则需要修改 Java 源代码，但这超出了本翻译指南的范围。

通常，应用程序会尝试加载 `language_{locale}.properties`，如果失败则回退到 `language.properties`。

## 翻译键的命名约定

为了保持一致性，请遵循以下约定：

- 使用 `CamelCase` 或 `PascalCase`。
- 键名应具有描述性，例如 `DismissConfirmation` 而不是 `msg1`。
- 菜单项相关的键可以加上 `Menu` 前缀，例如 `MenuFile`。

## 注意事项

- **编码**: 所有 `.properties` 文件都应使用 `UTF-8` 编码，以确保正确显示所有字符。
- **一致性**: 确保所有语言文件中都包含相同的键。如果某个键在特定语言文件中缺失，应用程序将使用 `language.properties` 中的默认值，这可能导致界面语言混杂。
- **测试**: 添加新语言后，请启动应用程序并检查所有菜单、对话框和消息，确保翻译正确显示且没有截断或格式问题。

通过遵循这些步骤，您可以轻松地为 Shimeji-Live 贡献新的语言翻译，让更多人能够享受这款有趣的桌面应用！